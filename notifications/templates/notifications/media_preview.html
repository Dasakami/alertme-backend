<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® SOS –ú–µ–¥–∏–∞ #{{ sos.id }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #1f2937;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 18px;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .info-card {
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .info-card h2 {
            font-size: 20px;
            color: #1f2937;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-item {
            display: flex;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .info-item:last-child {
            margin-bottom: 0;
        }
        
        .info-label {
            font-weight: 600;
            color: #6b7280;
            min-width: 120px;
        }
        
        .info-value {
            color: #1f2937;
        }
        
        .status-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status-active {
            background: #dc2626;
            color: white;
        }
        
        .status-resolved {
            background: #059669;
            color: white;
        }
        
        .status-cancelled {
            background: #6b7280;
            color: white;
        }
        
        .media-section {
            margin-top: 30px;
        }
        
        .media-card {
            background: #1f2937;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .media-card h3 {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        audio, video {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: #0891b2;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .download-btn:hover {
            background: #0e7490;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(8, 145, 178, 0.4);
        }
        
        .no-media {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }
        
        .no-media-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .footer {
            background: #f9fafb;
            padding: 30px;
            text-align: center;
            color: #6b7280;
        }
        
        .footer p {
            margin: 5px 0;
        }
        
        .map-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: #059669;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .map-link:hover {
            background: #047857;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-icon">üö®</div>
            <h1>SOS –°–∏–≥–Ω–∞–ª #{{ sos.id }}</h1>
            <p>–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ</p>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- SOS Info -->
            <div class="info-card">
                <h2>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏–≥–Ω–∞–ª–µ</h2>
                
                <div class="info-item">
                    <div class="info-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</div>
                    <div class="info-value">{{ sos.user.phone_number }}</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">–°—Ç–∞—Ç—É—Å:</div>
                    <div class="info-value">
                        <span class="status-badge status-{{ sos.status }}">
                            {% if sos.status == 'active' %}
                                üî¥ –ê–∫—Ç–∏–≤–µ–Ω
                            {% elif sos.status == 'resolved' %}
                                ‚úÖ –†–µ—à–µ–Ω
                            {% elif sos.status == 'cancelled' %}
                                ‚ö´ –û—Ç–º–µ–Ω–µ–Ω
                            {% else %}
                                {{ sos.status }}
                            {% endif %}
                        </span>
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">–í—Ä–µ–º—è:</div>
                    <div class="info-value">{{ sos.created_at|date:"d.m.Y H:i" }}</div>
                </div>
                
                {% if sos.address %}
                <div class="info-item">
                    <div class="info-label">–ê–¥—Ä–µ—Å:</div>
                    <div class="info-value">{{ sos.address }}</div>
                </div>
                {% endif %}
                
                {% if sos.latitude and sos.longitude %}
                <div class="info-item">
                    <div class="info-label">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</div>
                    <div class="info-value">{{ sos.latitude }}, {{ sos.longitude }}</div>
                </div>
                
                <div style="text-align: center;">
                    <a href="https://www.google.com/maps/search/?api=1&query={{ sos.latitude }},{{ sos.longitude }}" 
                       class="map-link" 
                       target="_blank">
                        üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Media Section -->
            <div class="media-section">
                {% if audio_url or video_url %}
                    {% if audio_url %}
                    <div class="media-card">
                        <h3>üé§ –ê—É–¥–∏–æ–∑–∞–ø–∏—Å—å</h3>
                        <audio controls preload="metadata">
                            <source src="{{ audio_url }}" type="audio/aac">
                            <source src="{{ audio_url }}" type="audio/mpeg">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ.
                        </audio>
                        <a href="{{ audio_url }}" download class="download-btn">
                            ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ
                        </a>
                    </div>
                    {% endif %}

                    {% if video_url %}
                    <div class="media-card">
                        <h3>üé¨ –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å</h3>
                        <video controls preload="metadata">
                            <source src="{{ video_url }}" type="video/mp4">
                            <source src="{{ video_url }}" type="video/webm">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ.
                        </video>
                        <a href="{{ video_url }}" download class="download-btn">
                            ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ
                        </a>
                    </div>
                    {% endif %}
                {% else %}
                    <div class="no-media">
                        <div class="no-media-icon">üì≠</div>
                        <h3>–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã</h3>
                        <p>–ö —ç—Ç–æ–º—É SOS —Å–∏–≥–Ω–∞–ª—É –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∞—É–¥–∏–æ –∏–ª–∏ –≤–∏–¥–µ–æ –∑–∞–ø–∏—Å–∏</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>AlertMe</strong> - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
            <p>–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø–æ–º–æ—â—å</p>
            <p style="font-size: 12px; margin-top: 15px; color: #9ca3af;">
                –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é<br>
                –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å—Å—ã–ª–∫—É —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
            </p>
        </div>
    </div>
</body>
</html>